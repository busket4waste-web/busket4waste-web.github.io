# Тестирование прототипа у курьеров

Как разослать прототип курьерам и сохранить их ответы: **цель** и статусы тогглов «Показывать цель покупателям» и «Показывать мое фото покупателям».

---

## 1. Что нужно сделать вам (организатору)

### 1.1 Выбрать способ сбора ответов

**Вариант А — Formspree (проще всего)**  
Ответы приходят на почту и/или в личный кабинет, без своего сервера.

1. Зайдите на [formspree.io](https://formspree.io), зарегистрируйтесь.
2. Создайте новую форму (Create new form).
3. Скопируйте **Endpoint URL** формы (например: `https://formspree.io/f/xxxxxxxx`).
4. В папке проекта откройте `index.html`, найдите перед подключением `app.js` блок:
   ```html
   <script>
     window.TEST_SUBMIT_URL = '';
   </script>
   ```
5. Вставьте ваш URL в кавычки:
   ```html
   window.TEST_SUBMIT_URL = 'https://formspree.io/f/xxxxxxxx';
   ```
6. Сохраните файл.

В ответах вы будете получать поля: `goal`, `show_goal`, `show_photo`, `sent_at`.

**Вариант В — Google Таблица**  
Ответы попадают в строки вашей Google-таблицы. Нужно один раз создать таблицу и скрипт в Google Apps Script — пошагово ниже.

**Вариант Б — без сервиса (только копирование)**  
Ничего настраивать не нужно. Курьер нажимает «Отправить» — в буфер копируется текст с целью и статусами тогглов. Он вставляет его в ваш чат, форму или почту и отправляет вам сам.

---

### 1.1.1 Настройка приёма в Google Таблицу (Вариант В)

1. Создайте [Google Таблицу](https://sheets.google.com) и в первой строке задайте заголовки: `Цель` | `Показывать цель` | `Показывать фото` | `Время`.
2. В таблице откройте **Расширения → Apps Script**. Удалите шаблонный код и вставьте скрипт целиком из файла `google-apps-script.js` (он лежит в корне папки проекта).
3. Сохраните проект (Ctrl+S), затем **Развёртывание → Новое развёртывание** → тип **Веб-приложение**.
4. В настройках развёртывания:
   - **Выполнять от имени**: вы
   - **У кого есть доступ**: любой пользователь
5. Нажмите **Развернуть**, скопируйте **URL веб-приложения** (вид как `https://script.google.com/macros/s/…/exec`).
6. В проекте прототипа в `index.html` в блоке перед `app.js` подставьте этот URL:
   ```html
   window.TEST_SUBMIT_URL = 'https://script.google.com/macros/s/ВАШ_ID/exec';
   ```
7. Сохраните и загрузите обновлённый прототип на хостинг.

Каждое нажатие «Отправить» в прототипе добавляет в таблицу новую строку: цель, да/нет по тогглам, время.

**Если браузер выдаёт ошибку доступа (CORS)** при отправке из прототипа на другом сайте — откройте прототип и форму по одному домену или используйте Вариант А (Formspree), а в [Zapier](https://zapier.com) / [Make](https://make.com) настройте сценарий «Formspree → Google Sheets».

---

### 1.2 Выложить прототип по ссылке

Курьеры должны открывать прототип по **одной и той же ссылке** (чтобы при Варианте А ответы шли в один приёмник).

- Залейте папку проекта на любой хостинг:
  - [GitHub Pages](https://pages.github.com) (репо → Settings → Pages)
  - [Netlify](https://www.netlify.com) (перетащите папку в Netlify Drop)
  - [Vercel](https://vercel.com), [Cloudflare Pages](https://pages.cloudflare.com) и т.п.
- Либо раздайте прототип через внутренний корпоративный хостинг/портал, если он у вас есть.

В итоге у вас должна быть ссылка вида:  
`https://ваш-сайт.github.io/прототип/` или `https://ваш-проект.netlify.app/`.

---

### 1.3 Разослать ссылку и инструкцию курьерам

Напишите короткий текст, например:

> Привет! Нужна помощь с тестом нового раздела «Цель» в чаевых. Открой по ссылке: [ваша ссылка]
>
> 1. Зайди в «Чаевые».
> 2. Заполни или измени «Моя цель», включи/выключи «Показывать цель покупателям» и «Показывать мое фото покупателям» так, как тебе комфортно.
> 3. Нажми «Отправить».
>
> Если всё ок — увидишь «Ответы отправлены» или текст просто скопируется в буфер; в последнем случае вставь его сюда в чат / в форму по ссылке [если даёте отдельную форму].

При Варианте А (Formspree) ответы будут приходить вам на почту или в кабинет Formspree. При Варианте Б — только туда, куда курьер сам пришлёт скопированный текст.

---

## 2. Что делает прототип при нажатии «Отправить»

Собираются и отправляются/копируются:

| Данные | Описание |
|--------|----------|
| **Цель** | Текст цели (или «не указана», если пусто) |
| **Показывать цель покупателям** | да / нет |
| **Показывать мое фото покупателям** | да / нет |
| **Время** | Момент нажатия кнопки (ISO) |

- Если в `index.html` задан `window.TEST_SUBMIT_URL` — данные отправляются POST-запросом на этот URL (Formspree принимает такие запросы).
- Если URL пустой — в буфер копируется текст с этими полями, курьер вставляет его туда, куда вы попросили.

---

## 3. Где в проекте что менять

| Задача | Файл / место |
|--------|----------------|
| Включить отправку на Formspree | `index.html` → `window.TEST_SUBMIT_URL = 'https://formspree.io/f/…'` |
| Изменить текст кнопки | `index.html` → кнопка с `id="btn-submit-test"` |
| Логика сбора/отправки | `app.js` → функции `getTestPayload`, `submitOrCopyTest` |

---

## 4. Идентификация курьера (по желанию)

Сейчас в запросе нет имени/ника. Чтобы понимать, кто ответил:

- **Вариант 1.** В ссылке добавлять параметр, например:  
  `https://ваш-сайт.netlify.app/?courier=иванов`  
  — тогда в коде можно читать `?courier=…` и отправлять его в формах как дополнительное поле (это нужно дописать в `app.js`).
- **Вариант 2.** Просить курьера в конце цели или в отдельном поле написать свой ник/имя — тогда вы смотрите по тексту цели или по присланному вручную сообщению.

При необходимости можно отдельно добавить в прототип поле «Твой ник/имя для теста» и отправлять его вместе с целью и тогглами.
